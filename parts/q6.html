<html>

<head>
    <script type="text/javascript" src=" https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src=" https://www.chartjs.org/dist/2.7.3/Chart.bundle.js"></script>
    <script type="text/javascript" src=" https://www.chartjs.org/samples/latest/utils.js"></script>
</head>

<body>
    <div id="container" style="width: 75%;">
        <canvas id="q6"></canvas>
        <script>
            /* CHAMADA AJAX GUARDADA NUMA VAR*/
            var results = $.ajax({
                type: 'GET',
                url: 'q6.php',
                data: { variable: 'value' },
                dataType: 'json',
                async: false,
            }).responseJSON;


            /* PROCESSAMENTO DO OBJETO PARA FILTRAR ALGUNS RESULTADOS */
            var labels = results.map(function (e) {
                return e.answer_text;
            });
            var data = results.map(function (e) {
                return e.answer_value;
            });

            /* CONFIGS DO GRAFICO */
            var config = {
                type: 'doughnut',
                data: {
                    datasets: [{
                        data: data,
                        backgroundColor: ["#8c1010", "#e9a60d", "#ef6f6f", "#007382", "#896628", "#be1428", "#6a8f91", "#023e44", "#ffc76c", "#3caab4", "#3d000c", "#002b2b", "#ba6a00", "#b78a8a", "#964040", "#586c6d", "#be1428", "#9bc4c4", "#b29569"],
                    }],
                    labels: labels,
                },
                options: {
                    responsive: true,
                    legend: {
                        position: 'bottom',
						labels: {
							fontColor: '#ffffff'
						}
                    },
                    title: {
                        display: false
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true
                    }
                }
            };

            window.onload = function () {
                var ctx =  $('#q6')[0].getContext('2d');
                window.myDoughnut = new Chart(ctx, config);
            };
        </script>

</html>